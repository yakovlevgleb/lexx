"use strict";!function(){function s(e,t,o,n){if(n=n||"block",e)if(e.style.opacity=0,e.style.display=n,t)var i=0,s=setInterval(function(){1<=(i+=25/t)&&(clearInterval(s),i=1,o&&o()),e.style.opacity=i},50);else e.style.opacity=1,o&&o()}function r(e,t,o){if(e)if(e.style.opacity=1,t)var n=1,i=setInterval(function(){(n-=50/t)<=0&&(clearInterval(i),n=0,e.style.display="none",o&&o()),e.style.opacity=n},50);else e.style.opacity=0,e.style.display="none",o&&o()}if(window.lexx={},window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),/Mobi/.test(navigator.userAgent)){var t=document.createElement("div");t.className="table-responsive",document.querySelectorAll("table:not([class])").forEach(function(e){!function(e,t){e.parentNode.insertBefore(t,e),t.appendChild(e)}(e,t)})}var e,o,n,i,a,c,l,d,u;document.querySelectorAll("body *:not([class]):not([id]), .hero__title").forEach(function(e){e.innerHTML=e.innerHTML.replace(/( |&nbsp;|\(){1}([№а-яА-Я]){1}(\.){0,1} /g,"$1$2$3&nbsp;"),e.innerHTML=e.innerHTML.replace(/( |&nbsp;|\(){1}([№а-яА-Я]){1}(\.){0,1} /g,"$1$2$3&nbsp;")}),window.lexx.obj=(e=document.querySelector(".js-burger"),o=document.querySelectorAll(".lightgallery"),n=document.querySelector(".header"),i=document.querySelector(".footer"),a=document.querySelector("main"),c=parseFloat(window.getComputedStyle(n).marginTop)+parseFloat(window.getComputedStyle(n).marginBottom),l=parseFloat(window.getComputedStyle(i).marginTop)+parseFloat(window.getComputedStyle(i).marginBottom),window.addEventListener("resize",function(){var e=n.offsetHeight+c+i.offsetHeight+l;a.style.minHeight="calc(100vh - "+e+"px)"}),window.dispatchEvent(new Event("resize")),o&&o.forEach(function(e){lightGallery(e,{youtubePlayerParams:{modestbranding:1,showinfo:0,rel:0,controls:0}})}),e&&e.addEventListener("click",function(){var e=this,t=document.querySelector(".header__top"),o=document.querySelector("body");return e.classList.contains("header__burger--active")?(e.classList.remove("header__burger--active"),o.classList.remove("ovh"),r(t,"350",function(){t.classList.remove("active")})):(e.classList.add("header__burger--active"),o.classList.add("ovh"),s(t,"350",function(){t.classList.add("active")},"flex")),!1}),void(-1<navigator.userAgent.toLowerCase().indexOf("firefox")&&document.body.classList.add("ff"))),window.lexx.choises=void document.querySelectorAll(".js-single-choice").forEach(function(e){new Choices(e,{searchEnabled:!1,itemSelectText:"",position:"bottom",shouldSort:!1})}),window.lexx.swiper=function(){var e=document.querySelector(".js-hero-slider"),t=document.querySelector(".js-icatalog-slider"),o=document.querySelector(".js-icatalog-imgs");e&&new Swiper(e,{slidesPerView:1,loop:!0,speed:1200,effect:"coverflow",coverflowEffect:{rotate:70,depth:1e3},navigation:{nextEl:".js-hero-slider .swiper-button-next",prevEl:".js-hero-slider .swiper-button-prev"}}),t&&new Swiper(t,{slidesPerView:2,loop:0,speed:1200,coverflowEffect:{rotate:70,depth:1e3},navigation:{nextEl:".icatalog__slider .swiper-button-next",prevEl:".icatalog__slider .swiper-button-prev"},breakpoints:{1170:{simulateTouch:!1,touchRatio:0,loop:!1}}}).on("slideChangeTransitionStart",function(){n.slideToLoop(this.realIndex,1200)});if(o)var n=new Swiper(o,{speed:1200,loop:0,slidesPerView:1,effect:"coverflow",coverflowEffect:{rotate:70,depth:1e3},simulateTouch:!1,touchRatio:0})}(),window.lexx.projectsSlider=function(){var e=document.querySelector(".js-projects-popup-slider");if(e)new Swiper(e,{speed:1200,loop:1,slidesPerView:1,autoHeight:1,navigation:{nextEl:".js-projects-popup-slider .swiper-button-next",prevEl:".js-projects-popup-slider .swiper-button-prev"}})},window.lexx.indexAnimation=function(){var o=document.querySelector(".first-screen"),n=document.querySelector(".icatalog"),i=0,s=!0;if(document.body.classList.contains("index")&&1170<window.innerWidth){var r=function(e,t){var o="scroll"===t?e.currentTarget.pageYOffset:e.deltaY;s&&0<o&&(function(e,t,o){var i=1<arguments.length&&void 0!==t?t:1500,s=o,r=window.pageYOffset,a="now"in window.performance?performance.now():(new Date).getTime(),n=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight),c=window.innerHeight||document.documentElement.clientHeight||document.getElementsByTagName("body")[0].clientHeight,l="number"==typeof e?e:e.offsetTop-20,d=Math.round(n-l<c?n-c:l);if("requestAnimationFrame"in window==!1)return window.scroll(0,d),s&&s();!function e(){var t="now"in window.performance?performance.now():(new Date).getTime(),o=Math.min(1,(t-a)/i),n=o*(2-o);window.scroll(0,Math.ceil(n*(d-r)+r)),window.pageYOffset!==d&&document.body.scrollHeight!==window.scrollY+window.innerHeight?requestAnimationFrame(e):s&&s()}()}(2,0),e.preventDefault(),setTimeout(function(){s=!1},400))};window.addEventListener("wheel",function(e){r(e,"wheel")},{passive:!1}),window.addEventListener("scroll",function(e){r(e,"scroll");var t=window.pageYOffset||document.documentElement.scrollTop;i<t?o.offsetHeight-window.pageYOffset<o.offsetHeight&&!o.classList.contains("hide")&&(o.classList.add("hide"),o.classList.remove("show"),n.classList.add("show")):o.offsetHeight-window.pageYOffset!==o.offsetHeight||o.classList.contains("show")||s||(o.classList.add("show"),o.classList.remove("hide"),n.classList.remove("show"),s=!0),i=t<=0?0:t},!1)}}(),window.lexx.checkForm=function(e){var t=!0,o=e.querySelectorAll(".warning"),n=e.querySelectorAll("input, textarea, select"),i=e.querySelectorAll("input[name^=agreement]"),s=e.querySelector(".warning-text");e.classList.remove("warning"),o.length&&o.forEach(function(e){e.classList.remove("warning"),s&&s.classList.remove("active")});function r(){s&&!s.classList.contains(".active")&&s.classList.add("active")}return n.length&&n.forEach(function(e){if(e.getAttribute("data-req"))switch(e.getAttribute("data-type")){case"tel":/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/im.test(e.value)||(e.classList.add("warning"),t=!1,r());break;case"email":/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i.test(e.value)||(e.classList.add("warning"),t=!1,r());break;case"file":""===e.value.trim()&&(e.nextElementSibling.classList.add("warning"),t=!1,r());break;case"select":"-1"===e.nextSibling.querySelector(".choices__item").getAttribute("data-value")&&(e.parentNode.classList.add("warning"),t=!1,r());break;default:""===e.value.trim()&&(e.classList.add("warning"),t=!1,r())}}),i.length&&i.forEach(function(e){e.checked||(e.classList.add("warning"),t=!1)}),t},window.lexx.form={init:function(){return null!==document.querySelectorAll(".js-validate").length&&document.querySelectorAll(".js-validate").forEach(function(t){t.addEventListener("submit",function(e){window.lexx.checkForm(t)||(e.preventDefault(),e.stopPropagation(),t.classList.add("warning"))})}),this}}.init(),window.lexx.contactsMap=function(){var e=document.querySelector("#js-init-map");if(e){var t=e.getAttribute("data-coords").split(", ");ymaps.ready(function(){var e=new ymaps.Map("js-init-map",{center:[parseFloat(t[0]),parseFloat(t[1])],zoom:16,controls:["zoomControl"]});e.geoObjects.add(new ymaps.Placemark(e.getCenter(),{},{iconLayout:"default#image",iconImageHref:"/static/i/pin.svg",iconImageSize:[44,49],offset:[-22.5,-49]})),e.behaviors.disable("scrollZoom")})}}(),window.lexx.projectsMap=void(document.querySelector("#yaMap")&&ymaps.ready(function(){var e=new ymaps.Map("yaMap",{center:[55.751574,37.573856],zoom:3.5,controls:["zoomControl"]},{}),t=ymaps.templateLayoutFactory.createClass('<div class="cluster-number">{{ properties.geoObjects.length }}</div>'),o=new ymaps.Clusterer({clusterIcons:[{href:"/static/i/pin-many.svg",size:[45,49],offset:[-22.5,-49]}],clusterIconContentLayout:t}),n=[];o.events.add(["mouseenter","mouseleave"],function(e){var t=e.get("target"),o=e.get("type");void 0===t.getGeoObjects&&("mouseenter"==o?t.balloon.open({closeButton:!1}):t.balloon.close())});for(var i=window.pinsData,s=0,r=i.features.length;s<r;s++)n[s]=new ymaps.Placemark([parseFloat(i.features[s].geometry.coordinates[0]),parseFloat(i.features[s].geometry.coordinates[1])],{balloonContentBody:'<p class="balloon-text">'+i.features[s].properties.balloonContent+"</p>",id:i.features[s].id},{iconLayout:"default#image",iconImageHref:"/static/i/pin.svg",iconImageSize:[45,49],iconImageOffset:[-22.5,-49],balloonOffset:[0,-60],balloonMaxWidth:200,hideIconOnBalloonOpen:!1}),n[s].events.add(["click"],function(e){var t=e.get("target");ajaxPopup(""+t.properties.get("id")),0!=ajaxPopup(""+t.properties.get("id"))&&window.lexx.openPopup("projects")});o.add(n),e.geoObjects.add(o),e.behaviors.disable("scrollZoom"),e.setBounds(o.getBounds(),{checkZoomRange:!1})})),window.lexx.popups=(d=document.querySelector(".js-popup-overflow"),u=document.querySelector(".hidden-blocks"),void document.addEventListener("click",function(e){for(var t=e.target;t&&t!==this&&t!==document;t=t.parentNode)if(t.matches(".js-open-popup")){e.preventDefault();var o=document.getElementById(t.dataset.popup);if(document.body.classList.contains("ovh")&&document.querySelector(".header__top").classList.contains("active")){var n=document.querySelector(".js-burger"),i=document.querySelector(".header__top");document.body.classList.remove("ovh"),n.classList.remove("header__burger--active"),r(i,"0",function(){i.classList.remove("active")})}o&&(d.classList.add("active"),u.classList.add("active"),document.body.classList.add("popup-show"),s(o,350,function(){window.lexx.closePopup(o,!0),o.classList.add("active"),o.querySelector(".js-projects-popup-slider")&&window.lexx.projectsSlider()},"inline-block"))}})),window.lexx.openPopup=function(e){var t=document.getElementById(e),o=document.querySelector(".js-popup-overflow"),n=document.querySelector(".hidden-blocks");o.classList.add("active"),n.classList.add("active"),document.body.classList.add("popup-show"),s(t,350,function(){window.lexx.closePopup(t,!0),t.classList.add("active"),"projects"==e&&window.lexx.projectsSlider()},"inline-block")},window.lexx.closePopup=function(t,e){var o=t.querySelectorAll(".js-close-popup"),n=document.querySelector(".js-popup-overflow"),i=document.querySelector(".hidden-blocks");function s(e){n.classList.remove("active"),i.classList.remove("active"),t.querySelector(".js-projects-popup-slider")&&t.querySelector(".js-projects-popup-slider").swiper&&t.querySelector(".js-projects-popup-slider").swiper.destroy(!0,!0),r(t,0),document.body.classList.remove("popup-show"),t.classList.remove("active"),e.target.removeEventListener("click",s)}e?(o.forEach(function(e){e.addEventListener("click",s,{passive:!0})}),n.addEventListener("click",s,{passive:!0})):(n.classList.remove("active"),i.classList.remove("active"),t.classList.remove("active"),r(t,0,function(){t.querySelector(".js-projects-popup-slider")&&t.querySelector(".js-projects-popup-slider").swiper.destroy(!0,!0)}))}}();