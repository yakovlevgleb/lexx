"use strict";!function(){function i(e,t,o,n){if(n=n||"block",e)if(e.style.opacity=0,e.style.display=n,t)var s=0,i=setInterval(function(){1<=(s+=25/t)&&(clearInterval(i),s=1,o&&o()),e.style.opacity=s},50);else e.style.opacity=1,o&&o()}function r(e,t,o){if(e)if(e.style.opacity=1,t)var n=1,s=setInterval(function(){(n-=50/t)<=0&&(clearInterval(s),n=0,e.style.display="none",o&&o()),e.style.opacity=n},50);else e.style.opacity=0,e.style.display="none",o&&o()}if(window.lexx={},/Mobi/.test(navigator.userAgent)){var t=document.createElement("div");t.className="table-responsive",document.querySelectorAll("table:not([class])").forEach(function(e){!function(e,t){e.parentNode.insertBefore(t,e),t.appendChild(e)}(e,t)})}var e,o,n,s,a,c,l,d,u,p,f,m;document.querySelectorAll("body *:not([class]):not([id])").forEach(function(e){e.innerHTML=e.innerHTML.replace(/( |&nbsp;|\(){1}([№а-яА-Я]){1}(\.){0,1} /g,"$1$2$3&nbsp;"),e.innerHTML=e.innerHTML.replace(/( |&nbsp;|\(){1}([№а-яА-Я]){1}(\.){0,1} /g,"$1$2$3&nbsp;")}),window.lexx.obj=(e=document.querySelector(".js-burger"),(o=document.querySelectorAll(".lightgallery"))&&o.forEach(function(e){lightGallery(e,{youtubePlayerParams:{modestbranding:1,showinfo:0,rel:0,controls:0}})}),e&&e.addEventListener("click",function(){var e=this,t=document.querySelector(".header__top"),o=document.querySelector("body");return e.classList.contains("header__burger--active")?(e.classList.remove("header__burger--active"),o.classList.remove("ovh"),r(t,"350",function(){t.classList.remove("active")})):(e.classList.add("header__burger--active"),o.classList.add("ovh"),i(t,"350",function(){t.classList.add("active")},"flex")),!1}),void(-1<navigator.userAgent.toLowerCase().indexOf("firefox")&&document.body.classList.add("ff"))),window.lexx.choises=void document.querySelectorAll(".js-single-choice").forEach(function(e){new Choices(e,{searchEnabled:!1,itemSelectText:"",position:"bottom",shouldSort:!1})}),window.lexx.swiper=function(){var e=document.querySelector(".js-hero-slider"),t=document.querySelector(".js-icatalog-slider"),o=document.querySelector(".js-icatalog-imgs");e&&new Swiper(e,{slidesPerView:1,loop:!0,speed:1200,effect:"coverflow",coverflowEffect:{rotate:70,depth:1e3},navigation:{nextEl:".js-hero-slider .swiper-button-next",prevEl:".js-hero-slider .swiper-button-prev"}}),t&&new Swiper(t,{slidesPerView:2,loop:0,speed:1200,coverflowEffect:{rotate:70,depth:1e3},navigation:{nextEl:".icatalog__slider .swiper-button-next",prevEl:".icatalog__slider .swiper-button-prev"},breakpoints:{1170:{simulateTouch:!1,touchRatio:0,loop:!1}}}).on("slideChangeTransitionStart",function(){n.slideToLoop(this.realIndex,1200)});if(o)var n=new Swiper(o,{speed:1200,loop:0,slidesPerView:1,effect:"coverflow",coverflowEffect:{rotate:70,depth:1e3},simulateTouch:!1,touchRatio:0})}(),window.lexx.projectsSlider=function(){var e=document.querySelector(".js-projects-popup-slider");if(e)new Swiper(e,{speed:1200,loop:1,slidesPerView:1,autoHeight:1,navigation:{nextEl:".js-projects-popup-slider .swiper-button-next",prevEl:".js-projects-popup-slider .swiper-button-prev"}})},window.lexx.playVideo=(n=document.querySelectorAll(".js-play-video"),s=document.querySelector(".js-video-poster"),void(n&&n.forEach(function(e){e.addEventListener("click",function(){r(e,0),s&&r(s,0),this.parentElement.parentNode.querySelector(".js-video").setAttribute("controls","controls"),this.parentElement.parentNode.querySelector(".js-video").play()})}))),window.lexx.indexAnimation=(a=document.querySelector(".first-screen"),c=document.querySelector(".icatalog"),d=!(l=0),void(document.body.classList.contains("index")&&(window.addEventListener("mousewheel",function(e){d&&0<e.deltaY&&(function(e,t,o){var s=1<arguments.length&&void 0!==t?t:1500,i=o,r=window.pageYOffset,a="now"in window.performance?performance.now():(new Date).getTime(),n=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight),c=window.innerHeight||document.documentElement.clientHeight||document.getElementsByTagName("body")[0].clientHeight,l="number"==typeof e?e:e.offsetTop-20,d=Math.round(n-l<c?n-c:l);if("requestAnimationFrame"in window==0)return window.scroll(0,d),i&&i();!function e(){var t="now"in window.performance?performance.now():(new Date).getTime(),o=Math.min(1,(t-a)/s),n=o*(2-o);window.scroll(0,Math.ceil(n*(d-r)+r)),window.pageYOffset!==d&&document.body.scrollHeight!==window.scrollY+window.innerHeight?requestAnimationFrame(e):i&&i()}()}(20,0),e.preventDefault(),this.setTimeout(function(){d=!1},400))},{passive:!1}),window.addEventListener("scroll",function(e){var t=window.pageYOffset||document.documentElement.scrollTop;l<t?a.offsetHeight-this.window.scrollY<document.querySelector(".first-screen").offsetHeight&&!a.classList.contains("hide")&&(a.classList.add("hide"),a.classList.remove("show"),c.classList.add("show")):a.offsetHeight-this.window.scrollY!==document.querySelector(".first-screen").offsetHeight||a.classList.contains("show")||d||(a.classList.add("show"),a.classList.remove("hide"),c.classList.remove("show"),d=!0),l=t<=0?0:t},!1)))),window.lexx.checkForm=function(e){var t=!0,o=e.querySelectorAll(".warning"),n=e.querySelectorAll("input, textarea, select"),s=e.querySelectorAll("input[name^=agreement]"),i=e.querySelector(".warning-text");e.classList.remove("warning"),o.length&&o.forEach(function(e){e.classList.remove("warning"),i&&i.classList.remove("active")});function r(){i&&!i.classList.contains(".active")&&i.classList.add("active")}return n.length&&n.forEach(function(e){if(e.getAttribute("data-req"))switch(e.getAttribute("data-type")){case"tel":/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/im.test(e.value)||(e.classList.add("warning"),t=!1,r());break;case"email":/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i.test(e.value)||(e.classList.add("warning"),t=!1,r());break;case"file":""===e.value.trim()&&(e.nextElementSibling.classList.add("warning"),t=!1,r());break;case"select":"-1"===e.nextSibling.querySelector(".choices__item").getAttribute("data-value")&&(e.parentNode.classList.add("warning"),t=!1,r());break;default:""===e.value.trim()&&(e.classList.add("warning"),t=!1,r())}}),s.length&&s.forEach(function(e){e.checked||(e.classList.add("warning"),t=!1)}),t},window.lexx.form={init:function(){return null!==document.querySelectorAll(".js-validate").length&&document.querySelectorAll(".js-validate").forEach(function(t){t.addEventListener("submit",function(e){window.lexx.checkForm(t)||(e.preventDefault(),e.stopPropagation(),t.classList.add("warning"))})}),this}}.init(),window.lexx.contactsMap=function(){var e=document.querySelector("#js-init-map");if(e){var t=e.getAttribute("data-coords").split(", ");ymaps.ready(function(){var e=new ymaps.Map("js-init-map",{center:[parseFloat(t[0]),parseFloat(t[1])],zoom:16,controls:["zoomControl"]});e.geoObjects.add(new ymaps.Placemark(e.getCenter(),{},{iconLayout:"default#image",iconImageHref:"./static/i/pin.svg",iconImageSize:[44,49],offset:[-22.5,-49]})),e.behaviors.disable("scrollZoom")})}}(),window.lexx.projectsMap=(u=document.querySelector("#yaMap"),(p=new XMLHttpRequest).open("GET","./data.json",!0),void(u&&ymaps.ready(function(){var n=new ymaps.Map("yaMap",{center:[55.751574,37.573856],zoom:3.5,controls:["zoomControl"]},{}),e=ymaps.templateLayoutFactory.createClass('<div class="cluster-number">{{ properties.geoObjects.length }}</div>'),s=new ymaps.Clusterer({clusterIcons:[{href:"./static/i/pin-many.svg",size:[45,49],offset:[-22.5,-49]}],clusterIconContentLayout:e}),i=[];s.events.add(["mouseenter","mouseleave"],function(e){var t=e.get("target"),o=e.get("type");void 0===t.getGeoObjects&&("mouseenter"==o?t.balloon.open({closeButton:!1}):t.balloon.close())}),p.onload=function(){if(200<=this.status&&this.status<400)for(var e=JSON.parse(this.response),t=0,o=e.features.length;t<o;t++)i[t]=new ymaps.Placemark([parseFloat(e.features[t].geometry.coordinates[0]),parseFloat(e.features[t].geometry.coordinates[1])],{balloonContentBody:'<p class="balloon-text">'+e.features[t].properties.balloonContent+"</p>",id:e.features[t].id},{iconLayout:"default#image",iconImageHref:"./static/i/pin.svg",iconImageSize:[45,49],iconImageOffset:[-22.5,-49],balloonOffset:[0,-60],hideIconOnBalloonOpen:!1}),i[t].events.add(["click"],function(e){e.get("target").properties.get("id"),window.lexx.openPopup("projects")});s.add(i),n.geoObjects.add(s),n.setBounds(s.getBounds(),{checkZoomRange:!1})},p.send()}))),window.lexx.popups=(f=document.querySelectorAll(".js-open-popup"),m=document.querySelector(".js-popup-overflow"),void(f&&f.forEach(function(e){var s=document.getElementById(e.dataset.popup);e.addEventListener("click",function(e){var t=window.scrollY+100;if(e.preventDefault(),document.body.classList.contains("ovh")&&document.querySelector(".header__top").classList.contains("active")){var o=document.querySelector(".js-burger"),n=document.querySelector(".header__top");document.body.classList.remove("ovh"),o.classList.remove("header__burger--active"),r(n,"0",function(){n.classList.remove("active")})}s&&(s.style.top=t+"px",m.classList.add("active"),i(s,350,function(){window.lexx.closePopup(s,!0),s.classList.add("active"),s.querySelector(".js-projects-popup-slider")&&window.lexx.projectsSlider()}))})}))),window.lexx.openPopup=function(e){var t=document.getElementById(e),o=window.scrollY+100,n=document.querySelector(".js-popup-overflow");t.style.top=o+"px",n.classList.add("active"),i(t,350,function(){window.lexx.closePopup(t,!0),t.classList.add("active"),"projects"==e&&window.lexx.projectsSlider()})},window.lexx.closePopup=function(t,e){var o=t.querySelectorAll(".js-close-popup"),n=document.querySelector(".js-popup-overflow");function s(e){n.classList.remove("active"),t.querySelector(".js-projects-popup-slider").swiper&&t.querySelector(".js-projects-popup-slider").swiper.destroy(!0,!0),r(t,0,function(){}),t.classList.remove("active"),e.target.removeEventListener("click",s)}e?o.forEach(function(e){e.addEventListener("click",s,{passive:!0})}):(n.classList.remove("active"),t.classList.remove("active"),r(t,0,function(){t.querySelector(".js-projects-popup-slider")&&t.querySelector(".js-projects-popup-slider").swiper.destroy(!0,!0)}))}}();